# 一、概念结构设计

首先我们powerdesigner中设计数据库的概念模型

![image-20220602153138271](数据库课程报告/image-20220602153138271.png)

# 二、逻辑结构设计

![image-20220602153318611](数据库课程报告/image-20220602153318611.png)

# 三、物理结构设计

## 物理模型图

![image-20220602153332585](数据库课程报告/image-20220602153332585.png)

## 数据库建立SQL语句

```sql
/*==============================================================*/
/* DBMS name:      MySQL 5.0                                    */
/* Created on:     2022-05-18 10:03:38                          */
/*==============================================================*/

drop table if exists StudentCourse;

drop table if exists CourseClass;

drop table if exists Student;

drop table if exists Teacher;

drop table if exists Class;

drop table if exists Course;

drop table if exists Major;

drop table if exists Faculty;


/*==============================================================*/
/* Table: Class                                                 */
/*==============================================================*/
create table Class
(
   className            varchar(20) not null,
   classCode            varchar(20) not null,
   majorCode            varchar(20) not null,
   primary key (classCode)
);

/*==============================================================*/
/* Table: Course                                                */
/*==============================================================*/
create table Course
(
   courseName           varchar(20) not null,
   courseNature         varchar(20) not null,
   courseCategory       varchar(20) not null,
   courseID             varchar(20) not null,
   facultyCode          varchar(20) not null,
   courseHours          int not null,
   credit               int not null,
   primary key (courseID)
);

/*==============================================================*/
/* Table: CourseClass                                           */
/*==============================================================*/
create table CourseClass
(
   courseClassID        varchar(20) not null,
   courseID             varchar(20) not null,
   teacherID            varchar(20) not null,
   courseClassTime      varchar(20),
   courseClassAddress   varchar(20),
   courseClassWeek      varchar(20),
   primary key (courseClassID)
);

/*==============================================================*/
/* Table: Faculty                                               */
/*==============================================================*/
create table Faculty
(
   facultyName          varchar(20) not null,
   facultyCode          varchar(20) not null,
   facultyAddress       varchar(20),
   facultyTeleno        varchar(20),
   primary key (facultyCode)
);

/*==============================================================*/
/* Table: Major                                                 */
/*==============================================================*/
create table Major
(
   majorName            varchar(20) not null,
   majorCode            varchar(20) not null,
   facultyCode          varchar(20) not null,
   degreeLevel          varchar(20) not null,
   graduationCredits    varchar(20) not null,
   primary key (majorCode)
);

/*==============================================================*/
/* Table: Student                                               */
/*==============================================================*/
create table Student
(
   studentName          varchar(20) not null,
   studentID            varchar(20) not null,
   classCode            varchar(20) not null,
   identifier           varchar(20),
   dormitory            varchar(20),
   address              varchar(100),
   teleno               varchar(20),
   birthday             date,
   sex                  varchar(20),
   grade                varchar(20),
   completedCredits     int,
   primary key (studentID)
);

/*==============================================================*/
/* Table: StudentCourse                                         */
/*==============================================================*/
create table StudentCourse
(
   courseClassID        varchar(20) not null,
   studentID            varchar(20) not null,
   score                int,
   primary key (courseClassID, studentID)
);

/*==============================================================*/
/* Table: Teacher                                               */
/*==============================================================*/
create table Teacher
(
   teacherName          varchar(20) not null,
   teacherID            varchar(20) not null,
   facultyCode          varchar(20) not null,
   primary key (teacherID)
);

alter table Class add constraint FK_Class_Major foreign key (majorCode)
      references Major (majorCode) on delete restrict on update cascade;

alter table Course add constraint FK_CourseFaculty foreign key (facultyCode)
      references Faculty (facultyCode) on delete restrict on update cascade;

alter table CourseClass add constraint FK_CourseOffer foreign key (courseID)
      references Course (courseID) on delete restrict on update cascade;

alter table CourseClass add constraint FK_TeacherTeaching foreign key (teacherID)
      references Teacher (teacherID) on delete restrict on update cascade;

alter table Major add constraint FK_Major_Faculty foreign key (facultyCode)
      references Faculty (facultyCode) on delete restrict on update cascade;

alter table Student add constraint FK_StudentClass foreign key (classCode)
      references Class (classCode) on delete restrict on update cascade;

alter table StudentCourse add constraint FK_StudentCourse foreign key (studentID)
      references Student (studentID) on delete restrict on update cascade;

alter table StudentCourse add constraint FK_StudentCourse2 foreign key (courseClassID)
      references CourseClass (courseClassID) on delete restrict on update cascade;

alter table Teacher add constraint FK_TeacherFaculty foreign key (facultyCode)
      references Faculty (facultyCode) on delete restrict on update cascade;




CREATE TRIGGER credit1
AFTER INSERT  ON studentcourse  -- 在插入后修改对应已修学分
FOR EACH ROW
BEGIN
	UPDATE student SET completedCredits=
	(SELECT sum(credit) as sum FROM course,courseclass,studentcourse WHERE
	studentcourse.studentID=new.studentID and 
	studentcourse.score>60 and 
	studentcourse.courseClassID=courseclass.courseClassID and 
	course.courseID=courseclass.courseID);
END;

CREATE TRIGGER credit2
AFTER UPDATE  ON studentcourse  -- 在更新后修改对应已修学分
FOR EACH ROW
BEGIN
	UPDATE student SET completedCredits=
	(SELECT sum(credit) as sum FROM course,courseclass,studentcourse WHERE
	studentcourse.studentID=new.studentID and 
	studentcourse.score>60 and 
	studentcourse.courseClassID=courseclass.courseClassID and 
	course.courseID=courseclass.courseID);
END;

CREATE TRIGGER credit3
AFTER DELETE  ON studentcourse  -- 在删除后修改对应已修学分
FOR EACH ROW
BEGIN
	UPDATE student SET completedCredits=
	(SELECT sum(credit) as sum FROM course,courseclass,studentcourse WHERE
	studentcourse.studentID=old.studentID and 
	studentcourse.score>60 and 
	studentcourse.courseClassID=courseclass.courseClassID and 
	course.courseID=courseclass.courseID);
END;
```

# 四、数据库实现

## 环境要求

编辑器：IDEA

数据库：mysql

语言：java 8

接口测试工具：postman

## 项目整体架构

## 管理员端

### 登陆认证

### 校建管理

#### 院系管理

#### 专业管理

#### 班级管理

#### 学生管理

### 教师管理

#### 教师信息管理

#### 教师授课管理

### 课程管理

#### 课程信息管理

#### 学生选课管理

## 学生端

## 教师端

# 四、界面设计

## 环境要求

## 项目整体架构



## 管理员端

## 学生端

## 教师端

# 五、项目使用说明

